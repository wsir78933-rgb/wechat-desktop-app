# Electron è°ƒè¯•æŒ‡å—

## ğŸ¯ è°ƒè¯•é…ç½®å·²å®Œæˆ

å·²ä¸ºé¡¹ç›®é…ç½®äº†å®Œæ•´çš„è°ƒè¯•ç¯å¢ƒï¼ŒåŒ…æ‹¬ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹è°ƒè¯•ã€‚

## ğŸ“‹ è°ƒè¯•æ–¹å¼

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ VSCode è°ƒè¯•å™¨ï¼ˆæ¨èï¼‰

#### 1. **è°ƒè¯•ä¸»è¿›ç¨‹**
- åœ¨ VSCode ä¸­æŒ‰ `F5` æˆ–ç‚¹å‡»"è¿è¡Œå’Œè°ƒè¯•"
- é€‰æ‹© **"è°ƒè¯•ä¸»è¿›ç¨‹"**
- å¯ä»¥åœ¨ä¸»è¿›ç¨‹ä»£ç ä¸­è®¾ç½®æ–­ç‚¹ï¼ˆsrc/main/**/*.tsï¼‰
- æ”¯æŒå˜é‡æŸ¥çœ‹ã€è°ƒç”¨æ ˆè¿½è¸ªç­‰å®Œæ•´è°ƒè¯•åŠŸèƒ½

#### 2. **è°ƒè¯•æ¸²æŸ“è¿›ç¨‹**
- å…ˆå¯åŠ¨ `npm run dev`
- åœ¨ VSCode ä¸­é€‰æ‹© **"è°ƒè¯•æ¸²æŸ“è¿›ç¨‹"**
- å¯ä»¥åœ¨æ¸²æŸ“è¿›ç¨‹ä»£ç ä¸­è®¾ç½®æ–­ç‚¹ï¼ˆsrc/renderer/**/*.tsxï¼‰

#### 3. **åŒæ—¶è°ƒè¯•ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹**
- é€‰æ‹© **"è°ƒè¯•ä¸»è¿›ç¨‹ & æ¸²æŸ“è¿›ç¨‹"**
- è¿™ä¼šåŒæ—¶å¯åŠ¨ä¸¤ä¸ªè°ƒè¯•ä¼šè¯
- å¯ä»¥åœ¨ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¸­åŒæ—¶è®¾ç½®æ–­ç‚¹

### æ–¹å¼äºŒï¼šä½¿ç”¨ Chrome DevTools

#### 1. **å¯åŠ¨è°ƒè¯•æ¨¡å¼**
```bash
npm run dev:debug
```

#### 2. **ä¸»è¿›ç¨‹è°ƒè¯•**
- åœ¨ Chrome æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š`chrome://inspect`
- ç‚¹å‡» "Configure..." æ·»åŠ ï¼š`localhost:5858`
- ç‚¹å‡» "inspect" å¼€å§‹è°ƒè¯•ä¸»è¿›ç¨‹

#### 3. **æ¸²æŸ“è¿›ç¨‹è°ƒè¯•**
- åº”ç”¨å¯åŠ¨åä¼šè‡ªåŠ¨æ‰“å¼€ DevTools
- æˆ–åœ¨åº”ç”¨ä¸­æŒ‰ `Ctrl+Shift+I` (Windows/Linux) æˆ– `Cmd+Option+I` (Mac)

### æ–¹å¼ä¸‰ï¼šå‘½ä»¤è¡Œè°ƒè¯•

#### 1. **æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—**
```bash
npm run dev
```
æ‰€æœ‰ `console.log` è¾“å‡ºä¼šæ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸­

#### 2. **å¯ç”¨è¯¦ç»†æ—¥å¿—**
åœ¨ä»£ç ä¸­å·²é…ç½®äº†è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼š
- `[Preload]` - Preloadè„šæœ¬æ—¥å¿—
- `[IPC]` - IPCé€šä¿¡æ—¥å¿—
- `[Main]` - ä¸»è¿›ç¨‹æ—¥å¿—
- `[Renderer]` - æ¸²æŸ“è¿›ç¨‹æ—¥å¿—

## ğŸ” å¸¸è§è°ƒè¯•åœºæ™¯

### 1. **è°ƒè¯• IPC é€šä¿¡é—®é¢˜**

åœ¨ `src/preload/index.ts` ä¸­è®¾ç½®æ–­ç‚¹ï¼š
```typescript
createArticle: (article) => {
  console.log('[Preload] è°ƒç”¨: createArticle', article);  // <- åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹
  return safeInvoke(IPC_CHANNELS.ARTICLE_CREATE, article);
}
```

åœ¨ `src/main/ipc/article.ts` ä¸­è®¾ç½®æ–­ç‚¹ï¼š
```typescript
ipcMain.handle(
  IPC_CHANNELS.ARTICLE_CREATE,
  async (_event, article: Partial<Article>): Promise<Article> => {
    console.log('[IPC] æ‰‹åŠ¨åˆ›å»ºæ–‡ç« :', article);  // <- åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹
    // ...
  }
)
```

### 2. **è°ƒè¯•æ–‡ç« é‡‡é›†åŠŸèƒ½**

åœ¨ `src/main/scrapers/wechat.ts` ä¸­è®¾ç½®æ–­ç‚¹ï¼š
```typescript
async scrapeArticle(url: string): Promise<ScrapeResult> {
  console.log('[Scraper] å¼€å§‹é‡‡é›†:', url);  // <- åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹
  // ...
}
```

### 3. **è°ƒè¯• UI ç»„ä»¶**

åœ¨ React ç»„ä»¶ä¸­è®¾ç½®æ–­ç‚¹ï¼š
```typescript
const handleSubmit = async () => {
  console.log('æäº¤æ–‡ç« æ•°æ®');  // <- åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹
  await window.api.createArticle(formData);
}
```

## ğŸ› ï¸ è°ƒè¯•å·¥å…·

### VSCode æ–­ç‚¹ç±»å‹
- **æ™®é€šæ–­ç‚¹**ï¼šç‚¹å‡»è¡Œå·å·¦ä¾§è®¾ç½®
- **æ¡ä»¶æ–­ç‚¹**ï¼šå³é”®æ–­ç‚¹ï¼Œæ·»åŠ æ¡ä»¶è¡¨è¾¾å¼
- **æ—¥å¿—ç‚¹**ï¼šåœ¨ä¸ä¸­æ–­æ‰§è¡Œçš„æƒ…å†µä¸‹è¾“å‡ºæ—¥å¿—
- **å‡½æ•°æ–­ç‚¹**ï¼šåœ¨ç‰¹å®šå‡½æ•°è¢«è°ƒç”¨æ—¶ä¸­æ–­

### Chrome DevTools åŠŸèƒ½
- **Elements**ï¼šæ£€æŸ¥ DOM ç»“æ„å’Œæ ·å¼
- **Console**ï¼šæŸ¥çœ‹æ—¥å¿—å’Œæ‰§è¡Œ JavaScript
- **Sources**ï¼šè®¾ç½®æ–­ç‚¹å’Œå•æ­¥è°ƒè¯•
- **Network**ï¼šç›‘æ§ç½‘ç»œè¯·æ±‚
- **Performance**ï¼šæ€§èƒ½åˆ†æ
- **Memory**ï¼šå†…å­˜æ³„æ¼æ£€æµ‹

## ğŸ“Š æ€§èƒ½åˆ†æ

### 1. **ä¸»è¿›ç¨‹æ€§èƒ½**
```bash
# ä½¿ç”¨ Node.js æ€§èƒ½åˆ†æ
node --inspect --inspect-brk out/main/index.js
```

### 2. **æ¸²æŸ“è¿›ç¨‹æ€§èƒ½**
- åœ¨ Chrome DevTools ä¸­ä½¿ç”¨ Performance é¢æ¿
- å½•åˆ¶ç”¨æˆ·äº¤äº’
- åˆ†æå¸§ç‡ã€é‡ç»˜ã€é‡æ’ç­‰

## ğŸ”§ è°ƒè¯•é…ç½®æ–‡ä»¶

### `.vscode/launch.json`
åŒ…å«ä»¥ä¸‹è°ƒè¯•é…ç½®ï¼š
- `è°ƒè¯•ä¸»è¿›ç¨‹`ï¼šè°ƒè¯• Electron ä¸»è¿›ç¨‹
- `è°ƒè¯•æ¸²æŸ“è¿›ç¨‹`ï¼šè°ƒè¯• React æ¸²æŸ“è¿›ç¨‹
- `è°ƒè¯•å…¨éƒ¨`ï¼šåŒæ—¶è°ƒè¯•ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹

### `.vscode/tasks.json`
åŒ…å«ä»¥ä¸‹ä»»åŠ¡ï¼š
- `npm: dev`ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `åœæ­¢å¼€å‘æœåŠ¡å™¨`ï¼šåœæ­¢æ‰€æœ‰ Electron è¿›ç¨‹
- `é‡å¯å¼€å‘æœåŠ¡å™¨`ï¼šé‡å¯å¼€å‘ç¯å¢ƒ

## ğŸ’¡ è°ƒè¯•æŠ€å·§

### 1. **å¿«é€Ÿå®šä½é—®é¢˜**
- ä½¿ç”¨æœç´¢åŠŸèƒ½æ‰¾åˆ°ç›¸å…³ä»£ç ï¼š`Ctrl+Shift+F` (Windows/Linux) æˆ– `Cmd+Shift+F` (Mac)
- æŸ¥çœ‹è°ƒç”¨æ ˆäº†è§£å‡½æ•°è°ƒç”¨è·¯å¾„
- ä½¿ç”¨ "Watch" é¢æ¿ç›‘æ§å˜é‡å€¼å˜åŒ–

### 2. **IPC é€šä¿¡è°ƒè¯•**
- åœ¨ Preload è„šæœ¬ä¸­æŸ¥çœ‹ API è°ƒç”¨
- åœ¨ä¸»è¿›ç¨‹ IPC å¤„ç†å™¨ä¸­æŸ¥çœ‹æ¥æ”¶åˆ°çš„æ•°æ®
- æ£€æŸ¥é€šé“åç§°æ˜¯å¦åŒ¹é…

### 3. **React ç»„ä»¶è°ƒè¯•**
- å®‰è£… React Developer Tools æµè§ˆå™¨æ‰©å±•
- æ£€æŸ¥ç»„ä»¶çŠ¶æ€å’Œ Props
- ä½¿ç”¨ Profiler åˆ†ææ¸²æŸ“æ€§èƒ½

### 4. **ç½‘ç»œè¯·æ±‚è°ƒè¯•**
- åœ¨ Network é¢æ¿æŸ¥çœ‹æ‰€æœ‰ HTTP è¯·æ±‚
- æ£€æŸ¥è¯·æ±‚å¤´ã€å“åº”æ•°æ®ã€çŠ¶æ€ç 
- æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œæµ‹è¯•

## âš ï¸ å¸¸è§é—®é¢˜

### 1. **æ–­ç‚¹ä¸ç”Ÿæ•ˆ**
- ç¡®ä¿ Source Maps å·²å¯ç”¨
- æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
- å°è¯•é‡å¯è°ƒè¯•ä¼šè¯

### 2. **è°ƒè¯•å™¨æ— æ³•è¿æ¥**
- æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼ˆ5858, 9223ï¼‰
- ç¡®ä¿é˜²ç«å¢™æœªé˜»æ­¢è¿æ¥
- å°è¯•é‡å¯ VSCode

### 3. **æ—¥å¿—ä¸æ˜¾ç¤º**
- æ£€æŸ¥ `NODE_ENV` ç¯å¢ƒå˜é‡
- ç¡®ä¿åœ¨æ­£ç¡®çš„è¿›ç¨‹ä¸­æŸ¥çœ‹æ—¥å¿—
- ä¸»è¿›ç¨‹æ—¥å¿—åœ¨ç»ˆç«¯ï¼Œæ¸²æŸ“è¿›ç¨‹æ—¥å¿—åœ¨ DevTools Console

## ğŸ“š ç›¸å…³èµ„æº

- [Electron è°ƒè¯•æ–‡æ¡£](https://www.electronjs.org/docs/latest/tutorial/debugging)
- [VSCode è°ƒè¯•æŒ‡å—](https://code.visualstudio.com/docs/editor/debugging)
- [Chrome DevTools æ–‡æ¡£](https://developer.chrome.com/docs/devtools/)

## ğŸš€ å¼€å§‹è°ƒè¯•

1. åœ¨ VSCode ä¸­æ‰“å¼€é¡¹ç›®
2. æŒ‰ `F5` å¯åŠ¨è°ƒè¯•
3. æˆ–è¿è¡Œ `npm run dev:debug` ä½¿ç”¨ Chrome DevTools
4. åœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹
5. å¼€å§‹è°ƒè¯•ï¼

---

**æç¤º**ï¼šè°ƒè¯•æ—¶å»ºè®®ä½¿ç”¨ VSCode è°ƒè¯•å™¨ï¼Œå®ƒæä¾›äº†æ›´å¥½çš„é›†æˆä½“éªŒå’Œæ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚
