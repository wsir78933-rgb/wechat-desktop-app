# Claude Code é¡¹ç›®æŒ‡å—

> æœ¬æ–‡æ¡£ä¸º Claude Code æä¾›é¡¹ç›®çš„æ ¸å¿ƒä¿¡æ¯å’Œå¼€å‘æŒ‡å—

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: å¯¹æ ‡è´¦å·ç®¡ç†è½¯ä»¶
**ç‰ˆæœ¬**: 1.0.1
**æŠ€æœ¯æ ˆ**: Python 3.10+ / PyQt5 / SQLite3
**å¼€å‘æ—¥æœŸ**: 2025-01-15

**é¡¹ç›®åŠŸèƒ½**:
- ğŸ“Š å¯¹æ ‡è´¦å·ç®¡ç†ï¼ˆæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€æœç´¢ï¼‰
- ğŸ“ æ–‡ç« ç®¡ç†ï¼ˆæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€æœç´¢ã€æ ‡ç­¾ï¼‰
- ğŸ“¤ æ•°æ®å¯¼å‡ºï¼ˆExcelã€JSONã€Markdownï¼‰
- ğŸ¨ Material Design é£æ ¼ç•Œé¢
- ğŸ’¾ æœ¬åœ° SQLite æ•°æ®åº“å­˜å‚¨

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         UI Layer (PyQt5)            â”‚
â”‚  MainWindow, Dialogs, Widgets       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Business Logic Layer          â”‚
â”‚  AccountManager, ArticleManager     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Data Access Layer           â”‚
â”‚       Database (SQLite)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Utils Layer                â”‚
â”‚   Logger, Config, Validators        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¨¡å—

1. **UI å±‚** (`src/main/python/ui/`)
   - `main_window.py` - ä¸»çª—å£ï¼ˆå·¦å³åˆ†æ å¸ƒå±€ï¼‰
   - `widgets/` - è‡ªå®šä¹‰ç»„ä»¶ï¼ˆè´¦å·åˆ—è¡¨ã€æ–‡ç« åˆ—è¡¨ï¼‰
   - `dialogs/` - å¯¹è¯æ¡†ï¼ˆæ·»åŠ è´¦å·ã€æ·»åŠ æ–‡ç« ï¼‰
   - `styles.py` - å…¨å±€æ ·å¼å®šä¹‰

2. **ä¸šåŠ¡é€»è¾‘å±‚** (`src/main/python/core/`)
   - `account_manager.py` - è´¦å·ç®¡ç†é€»è¾‘
   - `article_manager.py` - æ–‡ç« ç®¡ç†é€»è¾‘
   - `export_manager.py` - æ•°æ®å¯¼å‡ºé€»è¾‘
   - `database.py` - æ•°æ®åº“æ“ä½œå°è£…

3. **å·¥å…·å±‚** (`src/main/python/utils/`)
   - `logger.py` - æ—¥å¿—ç³»ç»Ÿ
   - `config.py` - é…ç½®ç®¡ç†
   - `validators.py` - æ•°æ®éªŒè¯

---

## ğŸ“ ç›®å½•ç»“æ„

```
å¯¹æ ‡è´¦å·ç®¡ç†è½¯ä»¶/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â””â”€â”€ python/              # Python æºä»£ç 
â”‚           â”œâ”€â”€ main.py          # åº”ç”¨ç¨‹åºå…¥å£ â­
â”‚           â”œâ”€â”€ core/            # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚           â”‚   â”œâ”€â”€ database.py
â”‚           â”‚   â”œâ”€â”€ account_manager.py
â”‚           â”‚   â”œâ”€â”€ article_manager.py
â”‚           â”‚   â””â”€â”€ export_manager.py
â”‚           â”œâ”€â”€ ui/              # ç•Œé¢å±‚
â”‚           â”‚   â”œâ”€â”€ main_window.py
â”‚           â”‚   â”œâ”€â”€ styles.py
â”‚           â”‚   â”œâ”€â”€ widgets/     # è‡ªå®šä¹‰ç»„ä»¶
â”‚           â”‚   â””â”€â”€ dialogs/     # å¯¹è¯æ¡†
â”‚           â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚               â”œâ”€â”€ logger.py
â”‚               â”œâ”€â”€ config.py
â”‚               â””â”€â”€ validators.py
â”œâ”€â”€ data/                        # æ•°æ®æ–‡ä»¶ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ database.db             # SQLite æ•°æ®åº“
â”œâ”€â”€ logs/                        # æ—¥å¿—æ–‡ä»¶ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ app.log
â”œâ”€â”€ output/                      # å¯¼å‡ºæ–‡ä»¶è¾“å‡ºç›®å½•
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”‚   â””â”€â”€ claude.md               # æœ¬æ–‡æ¡£
â”œâ”€â”€ tests/                       # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ .github/workflows/           # GitHub Actions
â”‚   â””â”€â”€ release.yml             # è‡ªåŠ¨æ‰“åŒ…é…ç½® â­
â”œâ”€â”€ build.spec                   # PyInstaller é…ç½® â­
â”œâ”€â”€ build.bat                    # æœ¬åœ°æ‰“åŒ…è„šæœ¬
â”œâ”€â”€ requirements.txt             # Python ä¾èµ–
â”œâ”€â”€ test_all_imports.py          # å¯¼å…¥æµ‹è¯•
â”œâ”€â”€ test_functions.py            # åŠŸèƒ½æµ‹è¯•
â””â”€â”€ README.md
```

---

## ğŸ¯ å…³é”®æ–‡ä»¶è¯´æ˜

### å…¥å£æ–‡ä»¶
- **`src/main/python/main.py`** (182è¡Œ)
  - åº”ç”¨ç¨‹åºå¯åŠ¨å…¥å£
  - åˆå§‹åŒ–æ—¥å¿—ã€è·¯å¾„ã€æ•°æ®åº“
  - åˆ›å»ºå¹¶æ˜¾ç¤ºä¸»çª—å£

### UI ä¸»çª—å£
- **`src/main/python/ui/main_window.py`** (400+è¡Œ)
  - å·¦å³åˆ†æ å¸ƒå±€
  - å·¦ä¾§ï¼šè´¦å·åˆ—è¡¨ + æ“ä½œæŒ‰é’®
  - å³ä¾§ï¼šæ–‡ç« åˆ—è¡¨ + è¯¦æƒ…
  - **TODO**: éƒ¨åˆ†åŠŸèƒ½éœ€è¦è¿æ¥åˆ°ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆ243ã€269ã€292ã€314è¡Œï¼‰

### æ•°æ®åº“å±‚
- **`src/main/python/core/database.py`**
  - SQLite å°è£…
  - äº‹åŠ¡ç®¡ç†
  - è¿æ¥æ± ç®¡ç†
  - è¡¨ç»“æ„ï¼š`accounts`, `articles`

### æ‰“åŒ…é…ç½®
- **`build.spec`** - PyInstaller é…ç½®
- **`.github/workflows/release.yml`** - GitHub Actions è‡ªåŠ¨æ‰“åŒ…

---

## ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### è¿è¡Œåº”ç”¨

```bash
# æ ‡å‡†æ¨¡å¼
python src/main/python/main.py

# è°ƒè¯•æ¨¡å¼ï¼ˆè¯¦ç»†æ—¥å¿—ï¼‰
python src/main/python/main.py --debug
```

### æµ‹è¯•

```bash
# æµ‹è¯•æ‰€æœ‰æ¨¡å—å¯¼å…¥
python test_all_imports.py

# æµ‹è¯•åŠŸèƒ½
python test_functions.py

# æµ‹è¯•æ•°æ®åº“
python src/test/test_database.py
```

---

## ğŸ“¦ æ‰“åŒ…å‘å¸ƒ

### æœ¬åœ°æ‰“åŒ…

```bash
# Windows ä¸€é”®æ‰“åŒ…
build.bat

# æˆ–æ‰‹åŠ¨æ‰§è¡Œ
pyinstaller --clean build.spec
```

### GitHub Actions è‡ªåŠ¨æ‰“åŒ…

```bash
# åˆ›å»º release tag è§¦å‘è‡ªåŠ¨æ„å»º
git tag v1.0.2
git push origin v1.0.2
```

**æ³¨æ„**: Tag å¿…é¡»ä»¥ `v` å¼€å¤´ï¼Œå¦‚ `v1.0.0`

---

## ğŸ’¡ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

- ä½¿ç”¨ **UTF-8** ç¼–ç 
- æ¯ä¸ªæ–‡ä»¶é¡¶éƒ¨æ·»åŠ æ–‡æ¡£å­—ç¬¦ä¸²
- å‡½æ•°å’Œç±»æ·»åŠ æ³¨é‡Šè¯´æ˜
- éµå¾ª PEP 8 è§„èŒƒ

### å‘½åè§„èŒƒ

- **ç±»å**: PascalCase ï¼ˆå¦‚ `AccountManager`ï¼‰
- **å‡½æ•°/å˜é‡**: snake_case ï¼ˆå¦‚ `get_account`ï¼‰
- **å¸¸é‡**: UPPER_CASE ï¼ˆå¦‚ `BUTTON_STYLE`ï¼‰
- **ç§æœ‰æˆå‘˜**: `_` å‰ç¼€ ï¼ˆå¦‚ `_validate_data`ï¼‰

### å¯¼å…¥é¡ºåº

```python
# 1. æ ‡å‡†åº“
import sys
import os

# 2. ç¬¬ä¸‰æ–¹åº“
from PyQt5.QtWidgets import QMainWindow

# 3. æœ¬åœ°æ¨¡å—
from core.database import Database
```

### æ—¥å¿—è®°å½•

```python
from utils.logger import get_logger

logger = get_logger(__name__)
logger.info("æ“ä½œæˆåŠŸ")
logger.error("æ“ä½œå¤±è´¥", exc_info=True)
```

---

## âš ï¸ å·²çŸ¥é—®é¢˜å’Œ TODO

### UI é›†æˆå¾…å®Œæˆï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰

| ä½ç½® | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| `main_window.py:243` | æ·»åŠ è´¦å·åŠŸèƒ½é›†æˆ | âš ï¸ TODO |
| `main_window.py:269` | æ·»åŠ æ–‡ç« åŠŸèƒ½é›†æˆ | âš ï¸ TODO |
| `main_window.py:292` | å¯¼å‡ºåŠŸèƒ½é›†æˆ | âš ï¸ TODO |
| `main_window.py:314` | çŠ¶æ€æ ç»Ÿè®¡é›†æˆ | âš ï¸ TODO |

**è¯´æ˜**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å·²å®Œæ•´å®ç°å¹¶æµ‹è¯•é€šè¿‡ï¼Œåªéœ€è¦åœ¨ UI å±‚è°ƒç”¨ç›¸åº”çš„ Managerã€‚

### æ•°æ®åº“ä¼˜åŒ–ï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰

- [ ] æ·»åŠ æ•°æ®åº“è¿ç§»æœºåˆ¶
- [ ] å®ç°æ•°æ®åº“å¤‡ä»½åŠŸèƒ½
- [ ] ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼ˆæ·»åŠ ç´¢å¼•ï¼‰

### åŠŸèƒ½å¢å¼ºï¼ˆä¼˜å…ˆçº§ï¼šä½ï¼‰

- [ ] æ·»åŠ è´¦å·åˆ†ç»„åŠŸèƒ½
- [ ] æ”¯æŒæ‰¹é‡å¯¼å…¥è´¦å·
- [ ] æ·»åŠ æ•°æ®ç»Ÿè®¡å›¾è¡¨
- [ ] æ”¯æŒè‡ªå®šä¹‰æ ‡ç­¾é¢œè‰²

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ‰“åŒ…åè¿è¡ŒæŠ¥é”™ "No module named 'ui'"

**A**: å·²åœ¨ v1.0.1 ä¿®å¤ï¼Œç¡®ä¿ä½¿ç”¨æœ€æ–°çš„ `build.spec` é…ç½®ã€‚

**è§£å†³æ–¹æ¡ˆ**:
- æ›´æ–° `hiddenimports` åˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰å­æ¨¡å—
- å‚è€ƒ `build.spec` çš„å®Œæ•´é…ç½®

### Q2: æ•°æ®åº“è·¯å¾„é—®é¢˜

**A**: æ•°æ®åº“æ–‡ä»¶ä½äº `data/database.db`ï¼Œç›¸å¯¹äºå¯æ‰§è¡Œæ–‡ä»¶ç›®å½•ã€‚

**ä»£ç ä½ç½®**: `main.py:78-82`

### Q3: ä¸­æ–‡ç¼–ç é—®é¢˜

**A**: Windows ç³»ç»Ÿéœ€è¦è®¾ç½® UTF-8 è¾“å‡ºã€‚

**è§£å†³æ–¹æ¡ˆ**:
```python
if sys.platform == 'win32':
    sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8')
```

---

## ğŸ“Š æ•°æ®åº“ç»“æ„

### accounts è¡¨

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”® |
| name | TEXT | è´¦å·åç§°ï¼ˆå”¯ä¸€ï¼‰ |
| category | TEXT | åˆ†ç±» |
| description | TEXT | æè¿° |
| avatar_url | TEXT | å¤´åƒURL |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ |

### articles è¡¨

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”® |
| account_id | INTEGER | å¤–é”® â†’ accounts.id |
| title | TEXT | æ–‡ç« æ ‡é¢˜ |
| url | TEXT | æ–‡ç« é“¾æ¥ |
| publish_date | DATE | å‘å¸ƒæ—¥æœŸ |
| cover_image | TEXT | å°é¢å›¾ |
| summary | TEXT | æ‘˜è¦ |
| tags | TEXT | æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼‰ |
| author | TEXT | ä½œè€… |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |

**çº¦æŸ**:
- `(account_id, url)` å”¯ä¸€çº¦æŸ
- å¤–é”®çº§è”åˆ é™¤

---

## ğŸš€ å¿«é€Ÿå®šä½ä»£ç 

### ä¿®æ”¹ UI æ ·å¼
- `src/main/python/ui/styles.py` - å…¨å±€æ ·å¼å®šä¹‰
- Material Design é£æ ¼ï¼Œè“è‰²ä¸»é¢˜è‰²

### æ·»åŠ æ–°åŠŸèƒ½
1. **ä¸šåŠ¡é€»è¾‘**: `src/main/python/core/`
2. **UI ç•Œé¢**: `src/main/python/ui/`
3. **æµ‹è¯•**: `tests/` æˆ– `test_*.py`

### ä¿®æ”¹æ•°æ®åº“ç»“æ„
- `src/main/python/core/database.py:42-117` - è¡¨åˆ›å»º SQL

### æ·»åŠ å¯¼å‡ºæ ¼å¼
- `src/main/python/core/export_manager.py` - å¯¼å‡ºåŠŸèƒ½

---

## ğŸ“ æäº¤è§„èŒƒ

```bash
git commit -m "ç±»å‹: ç®€çŸ­æè¿°

è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰

ğŸ¤– Generated with Claude Code

Co-Authored-By: Claude <noreply@anthropic.com>"
```

**ç±»å‹**:
- `feat` - æ–°åŠŸèƒ½
- `fix` - ä¿®å¤ bug
- `docs` - æ–‡æ¡£æ›´æ–°
- `style` - ä»£ç æ ¼å¼
- `refactor` - é‡æ„
- `test` - æµ‹è¯•ç›¸å…³
- `chore` - æ„å»º/å·¥å…·ç›¸å…³

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **ç”¨æˆ·æ‰‹å†Œ**: `docs/ç”¨æˆ·æ–‡æ¡£.md`
- **å¼€å‘æ–‡æ¡£**: `docs/å¼€å‘æ–‡æ¡£.md`
- **å‘å¸ƒè¯´æ˜**: `å‘å¸ƒè¯´æ˜.md`
- **æ›´æ–°æ—¥å¿—**: `CHANGELOG.md`

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **GitHub Issues**: æŠ¥å‘Š bug æˆ–åŠŸèƒ½è¯·æ±‚
- **é¡¹ç›®ä»“åº“**: https://github.com/wsir78933-rgb/wechat-desktop-app

---

**æœ€åæ›´æ–°**: 2025-10-08
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
