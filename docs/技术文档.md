# å¯¹æ ‡è´¦å·ç®¡ç†è½¯ä»¶ - æŠ€æœ¯æ–‡æ¡£

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-01-15
**æœ€åæ›´æ–°**: 2025-01-15
**æŠ€æœ¯æ ˆ**: Python + PyQt5 + SQLite

---

## ğŸ“‹ ç›®å½•

1. [æŠ€æœ¯æ ˆé€‰å‹](#æŠ€æœ¯æ ˆé€‰å‹)
2. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
3. [æ ¸å¿ƒæŠ€æœ¯å®ç°](#æ ¸å¿ƒæŠ€æœ¯å®ç°)
4. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
5. [UIç»„ä»¶è®¾è®¡](#uiç»„ä»¶è®¾è®¡)
6. [å¼€å‘ç¯å¢ƒé…ç½®](#å¼€å‘ç¯å¢ƒé…ç½®)
7. [æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ](#æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ)

---

## 1. æŠ€æœ¯æ ˆé€‰å‹

### 1.1 æ•´ä½“æŠ€æœ¯æ–¹æ¡ˆ

**å¼€å‘è¯­è¨€**: Python 3.8+
**GUIæ¡†æ¶**: PyQt5
**æ•°æ®åº“**: SQLite3
**æ‰“åŒ…å·¥å…·**: PyInstaller

### 1.2 æŠ€æœ¯é€‰å‹ç†ç”±

#### Python 3.8+
**é€‰æ‹©ç†ç”±**ï¼š
- âœ… å¼€å‘æ•ˆç‡é«˜ï¼Œä»£ç ç®€æ´æ˜“ç»´æŠ¤
- âœ… ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“ç”Ÿæ€
- âœ… è·¨å¹³å°æ”¯æŒï¼ˆWindows/macOS/Linuxï¼‰
- âœ… é€‚åˆå¿«é€ŸåŸå‹å¼€å‘å’Œè¿­ä»£

**ç‰ˆæœ¬è¦æ±‚**ï¼š
- æœ€ä½ç‰ˆæœ¬ï¼šPython 3.8
- æ¨èç‰ˆæœ¬ï¼šPython 3.10+
- æ”¯æŒç±»å‹æ³¨è§£å’Œç°ä»£Pythonç‰¹æ€§

#### PyQt5
**é€‰æ‹©ç†ç”±**ï¼š
- âœ… æˆç†Ÿç¨³å®šçš„GUIæ¡†æ¶ï¼Œå¹¿æ³›åº”ç”¨äºæ¡Œé¢åº”ç”¨å¼€å‘
- âœ… ä¸°å¯Œçš„ç»„ä»¶åº“ï¼Œæ”¯æŒå¤æ‚ç•Œé¢å¸ƒå±€
- âœ… è‰¯å¥½çš„æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒ
- âœ… æ”¯æŒç°ä»£åŒ–UIè®¾è®¡ï¼ˆMaterial Designé£æ ¼ï¼‰
- âœ… åŸç”Ÿå¤–è§‚ï¼Œæ€§èƒ½ä¼˜ç§€

**æ ¸å¿ƒç»„ä»¶**ï¼š
```python
from PyQt5.QtWidgets import (
    QApplication, QMainWindow, QWidget,
    QHBoxLayout, QVBoxLayout, QSplitter,
    QListWidget, QTreeWidget, QTableWidget,
    QPushButton, QLineEdit, QLabel,
    QDialog, QMessageBox, QFileDialog
)
from PyQt5.QtCore import Qt, QTimer, pyqtSignal
from PyQt5.QtGui import QIcon, QFont, QColor
```

**ä¸PyQt6çš„å¯¹æ¯”**ï¼š
- PyQt5æ›´æˆç†Ÿç¨³å®šï¼Œç¤¾åŒºèµ„æºæ›´ä¸°å¯Œ
- PyQt5å…¼å®¹æ€§æ›´å¥½ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ
- PyQt6æ˜¯æ–°ç‰ˆæœ¬ï¼Œéƒ¨åˆ†APIæœ‰å˜åŒ–

#### SQLite3
**é€‰æ‹©ç†ç”±**ï¼š
- âœ… è½»é‡çº§ï¼Œæ— éœ€ç‹¬ç«‹æœåŠ¡å™¨
- âœ… é›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨
- âœ… å•æ–‡ä»¶æ•°æ®åº“ï¼Œä¾¿äºå¤‡ä»½å’Œè¿ç§»
- âœ… Pythonå†…ç½®æ”¯æŒï¼Œæ— éœ€é¢å¤–å®‰è£…
- âœ… æ”¯æŒäº‹åŠ¡ã€å¤–é”®çº¦æŸç­‰é«˜çº§ç‰¹æ€§
- âœ… é€‚åˆå°å‹åˆ°ä¸­å‹æ•°æ®é‡ï¼ˆ10ä¸‡çº§åˆ«è®°å½•ï¼‰

**æ€§èƒ½ç‰¹ç‚¹**ï¼š
- è¯»å–é€Ÿåº¦ï¼šéå¸¸å¿«
- å†™å…¥é€Ÿåº¦ï¼šä¸­ç­‰ï¼ˆå•çº¿ç¨‹å†™å…¥ï¼‰
- é€‚åˆåœºæ™¯ï¼šæ¡Œé¢åº”ç”¨ã€åµŒå…¥å¼æ•°æ®åº“
- ä¸é€‚åˆï¼šé«˜å¹¶å‘å†™å…¥åœºæ™¯

### 1.3 æ ¸å¿ƒä¾èµ–åº“

#### å¿…éœ€ä¾èµ–
```txt
PyQt5>=5.15.0           # GUIæ¡†æ¶
openpyxl>=3.0.0         # Excelå¯¼å‡º
validators>=0.20.0      # URLéªŒè¯
python-dateutil>=2.8.0  # æ—¥æœŸå¤„ç†
```

#### å¼€å‘ä¾èµ–
```txt
pytest>=7.0.0           # å•å…ƒæµ‹è¯•
pytest-qt>=4.0.0        # PyQtæµ‹è¯•
black>=22.0.0           # ä»£ç æ ¼å¼åŒ–
pylint>=2.12.0          # ä»£ç æ£€æŸ¥
```

#### æ‰“åŒ…ä¾èµ–
```txt
PyInstaller>=5.0.0      # Windows exeæ‰“åŒ…
```

---

## 2. æŠ€æœ¯æ¶æ„

### 2.1 åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         è¡¨ç¤ºå±‚ (Presentation)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   MainWindow (ä¸»çª—å£)              â”‚  â”‚
â”‚  â”‚   - AccountListWidget (è´¦å·åˆ—è¡¨)   â”‚  â”‚
â”‚  â”‚   - ArticleListWidget (æ–‡ç« åˆ—è¡¨)   â”‚  â”‚
â”‚  â”‚   - Dialogs (å¯¹è¯æ¡†)               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   AccountManager (è´¦å·ç®¡ç†)        â”‚  â”‚
â”‚  â”‚   ArticleManager (æ–‡ç« ç®¡ç†)        â”‚  â”‚
â”‚  â”‚   ExportManager (å¯¼å‡ºç®¡ç†)         â”‚  â”‚
â”‚  â”‚   SearchManager (æœç´¢ç®¡ç†)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         æ•°æ®è®¿é—®å±‚ (Data Access)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Database (æ•°æ®åº“æ“ä½œ)            â”‚  â”‚
â”‚  â”‚   - Connection Management          â”‚  â”‚
â”‚  â”‚   - SQL Execution                  â”‚  â”‚
â”‚  â”‚   - Transaction Management         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         å·¥å…·å±‚ (Utilities)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Config (é…ç½®ç®¡ç†)                â”‚  â”‚
â”‚  â”‚   Logger (æ—¥å¿—è®°å½•)                â”‚  â”‚
â”‚  â”‚   URLValidator (URLéªŒè¯)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ¨¡å—ä¾èµ–å…³ç³»

```
main.py
  â””â”€> ui/main_window.py
       â”œâ”€> ui/widgets/account_list_widget.py
       â”œâ”€> ui/widgets/article_list_widget.py
       â”œâ”€> ui/dialogs/add_account_dialog.py
       â”œâ”€> ui/dialogs/add_article_dialog.py
       â”œâ”€> core/account_manager.py
       â”œâ”€> core/article_manager.py
       â””â”€> core/database.py
              â””â”€> utils/logger.py
```

### 2.3 æ•°æ®æµå‘

```
ç”¨æˆ·æ“ä½œ â†’ UIç»„ä»¶ â†’ Managerç±» â†’ Databaseç±» â†’ SQLite
                                              â†“
                                         æ•°æ®è¿”å›
                                              â†“
       UIæ›´æ–° â† Managerå¤„ç† â† Databaseè¿”å› â† SQLite
```

---

## 3. æ ¸å¿ƒæŠ€æœ¯å®ç°

### 3.1 æ•°æ®åº“è¿æ¥ç®¡ç†

#### å•ä¾‹æ¨¡å¼ + è¿æ¥æ± 
```python
class Database:
    """æ•°æ®åº“æ“ä½œç±»ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰"""

    _instance = None
    _connection = None

    def __new__(cls, db_path: str):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
        return cls._instance

    def __init__(self, db_path: str):
        if self._connection is None:
            self._connection = sqlite3.connect(
                db_path,
                check_same_thread=False,  # å…è®¸å¤šçº¿ç¨‹
                isolation_level='DEFERRED'  # äº‹åŠ¡çº§åˆ«
            )
            self._connection.row_factory = sqlite3.Row  # è¿”å›å­—å…¸æ ¼å¼
            self._enable_foreign_keys()
            self._create_tables()

    def _enable_foreign_keys(self):
        """å¯ç”¨å¤–é”®çº¦æŸ"""
        self._connection.execute("PRAGMA foreign_keys = ON")

    def execute(self, sql: str, params: tuple = ()) -> sqlite3.Cursor:
        """æ‰§è¡ŒSQLè¯­å¥"""
        try:
            return self._connection.execute(sql, params)
        except sqlite3.Error as e:
            logger.error(f"SQLæ‰§è¡Œé”™è¯¯: {e}, SQL: {sql}")
            raise

    def commit(self):
        """æäº¤äº‹åŠ¡"""
        self._connection.commit()

    def rollback(self):
        """å›æ»šäº‹åŠ¡"""
        self._connection.rollback()
```

#### äº‹åŠ¡ç®¡ç†
```python
from contextlib import contextmanager

@contextmanager
def transaction(db: Database):
    """äº‹åŠ¡ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""
    try:
        yield db
        db.commit()
    except Exception as e:
        db.rollback()
        logger.error(f"äº‹åŠ¡å›æ»š: {e}")
        raise
```

### 3.2 å·¦å³åˆ†æ å¸ƒå±€å®ç°

#### ä¸»çª—å£å¸ƒå±€
```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.init_ui()

    def init_ui(self):
        """åˆå§‹åŒ–UI"""
        self.setWindowTitle("å¯¹æ ‡è´¦å·ç®¡ç†è½¯ä»¶ v1.0")
        self.setMinimumSize(1000, 600)
        self.resize(1280, 800)

        # åˆ›å»ºä¸­å¿ƒéƒ¨ä»¶
        central_widget = QWidget()
        self.setCentralWidget(central_widget)

        # åˆ›å»ºä¸»å¸ƒå±€
        main_layout = QVBoxLayout(central_widget)

        # æ·»åŠ å·¥å…·æ 
        self.create_toolbar()

        # åˆ›å»ºåˆ†æ å®¹å™¨
        splitter = QSplitter(Qt.Horizontal)

        # å·¦ä¾§ï¼šè´¦å·åˆ—è¡¨
        self.account_list_widget = AccountListWidget()
        splitter.addWidget(self.account_list_widget)

        # å³ä¾§ï¼šæ–‡ç« åˆ—è¡¨
        self.article_list_widget = ArticleListWidget()
        splitter.addWidget(self.article_list_widget)

        # è®¾ç½®åˆ†æ æ¯”ä¾‹ï¼ˆ30% : 70%ï¼‰
        splitter.setStretchFactor(0, 3)  # å·¦ä¾§
        splitter.setStretchFactor(1, 7)  # å³ä¾§

        main_layout.addWidget(splitter)

        # åˆ›å»ºçŠ¶æ€æ 
        self.create_statusbar()

        # è¿æ¥ä¿¡å·
        self.account_list_widget.account_selected.connect(
            self.on_account_selected
        )
```

#### å¯è°ƒæ•´åˆ†æ 
```python
# QSplitterè‡ªåŠ¨æ”¯æŒæ‹–åŠ¨è°ƒæ•´
# ä¿å­˜åˆ†æ æ¯”ä¾‹åˆ°é…ç½®
def save_splitter_state(self):
    """ä¿å­˜åˆ†æ çŠ¶æ€"""
    state = self.splitter.saveState()
    config.set('splitter_state', state)

def restore_splitter_state(self):
    """æ¢å¤åˆ†æ çŠ¶æ€"""
    state = config.get('splitter_state')
    if state:
        self.splitter.restoreState(state)
```

### 3.3 è´¦å·åˆ—è¡¨ç»„ä»¶

```python
class AccountListWidget(QWidget):
    """è´¦å·åˆ—è¡¨ç»„ä»¶"""

    # å®šä¹‰ä¿¡å·
    account_selected = pyqtSignal(int)  # è´¦å·ID

    def __init__(self):
        super().__init__()
        self.account_manager = AccountManager()
        self.init_ui()
        self.load_accounts()

    def init_ui(self):
        """åˆå§‹åŒ–UI"""
        layout = QVBoxLayout(self)

        # æœç´¢æ¡†
        self.search_box = QLineEdit()
        self.search_box.setPlaceholderText("ğŸ” æœç´¢è´¦å·...")
        self.search_box.textChanged.connect(self.filter_accounts)
        layout.addWidget(self.search_box)

        # è´¦å·åˆ—è¡¨
        self.list_widget = QListWidget()
        self.list_widget.itemClicked.connect(self.on_item_clicked)
        self.list_widget.setContextMenuPolicy(Qt.CustomContextMenu)
        self.list_widget.customContextMenuRequested.connect(
            self.show_context_menu
        )
        layout.addWidget(self.list_widget)

        # æ“ä½œæŒ‰é’®
        btn_layout = QHBoxLayout()
        self.edit_btn = QPushButton("ç¼–è¾‘é€‰ä¸­è´¦å·")
        self.delete_btn = QPushButton("åˆ é™¤é€‰ä¸­è´¦å·")
        btn_layout.addWidget(self.edit_btn)
        btn_layout.addWidget(self.delete_btn)
        layout.addLayout(btn_layout)

    def load_accounts(self):
        """åŠ è½½è´¦å·åˆ—è¡¨"""
        self.list_widget.clear()
        accounts = self.account_manager.get_all_accounts()

        for account in accounts:
            item = QListWidgetItem()
            item.setData(Qt.UserRole, account['id'])

            # è‡ªå®šä¹‰æ˜¾ç¤ºæ ¼å¼
            text = f"ğŸ‘¤ {account['name']}\n"
            text += f"   {account['category']} | {account['article_count']}ç¯‡\n"
            text += f"   æœ€æ–°: {account['latest_date']}"
            item.setText(text)

            self.list_widget.addItem(item)

    def on_item_clicked(self, item):
        """è´¦å·è¢«ç‚¹å‡»"""
        account_id = item.data(Qt.UserRole)
        self.account_selected.emit(account_id)
```

### 3.4 æ–‡ç« åˆ—è¡¨ç»„ä»¶

```python
class ArticleListWidget(QWidget):
    """æ–‡ç« åˆ—è¡¨ç»„ä»¶"""

    def __init__(self):
        super().__init__()
        self.article_manager = ArticleManager()
        self.current_account_id = None
        self.init_ui()

    def init_ui(self):
        """åˆå§‹åŒ–UI"""
        layout = QVBoxLayout(self)

        # æœç´¢å’Œç­›é€‰æ 
        search_layout = QHBoxLayout()
        self.search_box = QLineEdit()
        self.search_box.setPlaceholderText("ğŸ” æœç´¢æ–‡ç« ...")
        self.search_box.textChanged.connect(self.filter_articles)

        self.category_combo = QComboBox()
        self.sort_combo = QComboBox()
        self.sort_combo.addItems(["æ’åº:æ—¶é—´", "æ’åº:æ ‡é¢˜"])

        search_layout.addWidget(self.search_box)
        search_layout.addWidget(self.category_combo)
        search_layout.addWidget(self.sort_combo)
        layout.addLayout(search_layout)

        # æ–‡ç« åˆ—è¡¨ï¼ˆä½¿ç”¨QTableWidgetæˆ–QListWidgetï¼‰
        self.list_widget = QListWidget()
        self.list_widget.setSelectionMode(
            QAbstractItemView.ExtendedSelection  # æ”¯æŒå¤šé€‰
        )
        self.list_widget.itemDoubleClicked.connect(self.open_article)
        layout.addWidget(self.list_widget)

        # æ‰¹é‡æ“ä½œæŒ‰é’®
        btn_layout = QHBoxLayout()
        self.batch_delete_btn = QPushButton("æ‰¹é‡åˆ é™¤")
        self.export_btn = QPushButton("å¯¼å‡ºé€‰ä¸­")
        btn_layout.addWidget(self.batch_delete_btn)
        btn_layout.addWidget(self.export_btn)
        layout.addLayout(btn_layout)

    def load_articles(self, account_id: int):
        """åŠ è½½æ–‡ç« åˆ—è¡¨"""
        self.current_account_id = account_id
        self.list_widget.clear()

        articles = self.article_manager.get_articles_by_account(account_id)

        for article in articles:
            item = QListWidgetItem()
            item.setData(Qt.UserRole, article['id'])

            # æ·»åŠ å¤é€‰æ¡†
            item.setFlags(item.flags() | Qt.ItemIsUserCheckable)
            item.setCheckState(Qt.Unchecked)

            # è‡ªå®šä¹‰æ˜¾ç¤ºæ ¼å¼
            text = f"ğŸ“„ {article['title']}\n"
            text += f"   {article['publish_date']} | {article['author']}"
            if article['tags']:
                text += f"\n   æ ‡ç­¾: {article['tags']}"
            item.setText(text)

            self.list_widget.addItem(item)

    def open_article(self, item):
        """æ‰“å¼€æ–‡ç« é“¾æ¥"""
        article_id = item.data(Qt.UserRole)
        article = self.article_manager.get_article(article_id)

        import webbrowser
        webbrowser.open(article['url'])
```

### 3.5 å¯¹è¯æ¡†å®ç°

#### æ·»åŠ è´¦å·å¯¹è¯æ¡†
```python
class AddAccountDialog(QDialog):
    """æ·»åŠ è´¦å·å¯¹è¯æ¡†"""

    def __init__(self, parent=None):
        super().__init__(parent)
        self.init_ui()

    def init_ui(self):
        """åˆå§‹åŒ–UI"""
        self.setWindowTitle("æ·»åŠ è´¦å·")
        self.setFixedSize(450, 500)

        layout = QVBoxLayout(self)
        form_layout = QFormLayout()

        # è´¦å·åç§°
        self.name_input = QLineEdit()
        form_layout.addRow("è´¦å·åç§°/ä½œè€…å *:", self.name_input)

        # è´¦å·åˆ†ç±»
        self.category_combo = QComboBox()
        self.category_combo.setEditable(True)
        self.category_combo.addItems(["ç§‘æŠ€", "è¥é”€", "è¿è¥", "è®¾è®¡"])
        form_layout.addRow("è´¦å·åˆ†ç±» *:", self.category_combo)

        # è´¦å·æè¿°
        self.desc_input = QTextEdit()
        self.desc_input.setMaximumHeight(80)
        form_layout.addRow("è´¦å·æè¿°:", self.desc_input)

        # å¤´åƒé“¾æ¥
        self.avatar_input = QLineEdit()
        form_layout.addRow("å¤´åƒé“¾æ¥:", self.avatar_input)

        layout.addLayout(form_layout)

        # æŒ‰é’®
        btn_layout = QHBoxLayout()
        self.ok_btn = QPushButton("ç¡®å®š")
        self.cancel_btn = QPushButton("å–æ¶ˆ")

        self.ok_btn.clicked.connect(self.accept)
        self.cancel_btn.clicked.connect(self.reject)

        btn_layout.addWidget(self.ok_btn)
        btn_layout.addWidget(self.cancel_btn)
        layout.addLayout(btn_layout)

    def get_data(self) -> dict:
        """è·å–è¾“å…¥æ•°æ®"""
        return {
            'name': self.name_input.text().strip(),
            'category': self.category_combo.currentText(),
            'description': self.desc_input.toPlainText().strip(),
            'avatar_url': self.avatar_input.text().strip()
        }

    def validate(self) -> bool:
        """éªŒè¯è¾“å…¥"""
        if not self.name_input.text().strip():
            QMessageBox.warning(self, "é”™è¯¯", "è´¦å·åç§°ä¸èƒ½ä¸ºç©ºï¼")
            return False

        if not self.category_combo.currentText().strip():
            QMessageBox.warning(self, "é”™è¯¯", "è´¦å·åˆ†ç±»ä¸èƒ½ä¸ºç©ºï¼")
            return False

        return True
```

### 3.6 URLéªŒè¯

```python
import validators

class URLValidator:
    """URLéªŒè¯å·¥å…·"""

    @staticmethod
    def validate(url: str) -> bool:
        """éªŒè¯URLæ ¼å¼"""
        if not url:
            return False

        # ä½¿ç”¨validatorsåº“éªŒè¯
        result = validators.url(url)
        return result is True

    @staticmethod
    def validate_with_message(url: str) -> tuple[bool, str]:
        """éªŒè¯URLå¹¶è¿”å›æ¶ˆæ¯"""
        if not url:
            return False, "URLä¸èƒ½ä¸ºç©º"

        if not url.startswith(('http://', 'https://')):
            return False, "URLå¿…é¡»ä»¥http://æˆ–https://å¼€å¤´"

        result = validators.url(url)
        if result is True:
            return True, "URLæ ¼å¼æ­£ç¡®"
        else:
            return False, "URLæ ¼å¼ä¸æ­£ç¡®"
```

### 3.7 æ•°æ®å¯¼å‡º

#### Excelå¯¼å‡º
```python
from openpyxl import Workbook
from openpyxl.styles import Font, Alignment

class ExportManager:
    """å¯¼å‡ºç®¡ç†å™¨"""

    @staticmethod
    def export_to_excel(accounts: list, articles: list, file_path: str):
        """å¯¼å‡ºä¸ºExcel"""
        wb = Workbook()

        # è´¦å·è¡¨
        ws1 = wb.active
        ws1.title = "è´¦å·åˆ—è¡¨"

        # è®¾ç½®è¡¨å¤´
        headers = ["è´¦å·ID", "è´¦å·åç§°", "åˆ†ç±»", "æè¿°", "æ–‡ç« æ•°", "åˆ›å»ºæ—¶é—´"]
        ws1.append(headers)

        # è®¾ç½®è¡¨å¤´æ ·å¼
        for cell in ws1[1]:
            cell.font = Font(bold=True)
            cell.alignment = Alignment(horizontal='center')

        # å¡«å……æ•°æ®
        for account in accounts:
            ws1.append([
                account['id'],
                account['name'],
                account['category'],
                account['description'],
                account['article_count'],
                account['created_at']
            ])

        # æ–‡ç« è¡¨
        ws2 = wb.create_sheet("æ–‡ç« åˆ—è¡¨")
        headers = ["æ–‡ç« ID", "è´¦å·åç§°", "æ ‡é¢˜", "é“¾æ¥", "å‘å¸ƒæ—¥æœŸ", "æ ‡ç­¾"]
        ws2.append(headers)

        for cell in ws2[1]:
            cell.font = Font(bold=True)
            cell.alignment = Alignment(horizontal='center')

        for article in articles:
            ws2.append([
                article['id'],
                article['account_name'],
                article['title'],
                article['url'],
                article['publish_date'],
                article['tags']
            ])

        # ä¿å­˜æ–‡ä»¶
        wb.save(file_path)
```

#### JSONå¯¼å‡º
```python
import json
from datetime import datetime

class DateTimeEncoder(json.JSONEncoder):
    """è‡ªå®šä¹‰JSONç¼–ç å™¨ï¼ˆå¤„ç†æ—¥æœŸæ—¶é—´ï¼‰"""

    def default(self, obj):
        if isinstance(obj, datetime):
            return obj.strftime('%Y-%m-%d %H:%M:%S')
        return super().default(obj)

@staticmethod
def export_to_json(accounts: list, articles: list, file_path: str):
    """å¯¼å‡ºä¸ºJSON"""
    data = {
        'accounts': accounts,
        'articles': articles,
        'export_time': datetime.now().strftime('%Y-%m-%d %H:%M:%S'),
        'total_accounts': len(accounts),
        'total_articles': len(articles)
    }

    with open(file_path, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2, cls=DateTimeEncoder)
```

---

## 4. æ•°æ®åº“è®¾è®¡

### 4.1 è¡¨ç»“æ„SQL

#### è´¦å·è¡¨
```sql
CREATE TABLE IF NOT EXISTS accounts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    category TEXT,
    description TEXT,
    avatar_url TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_accounts_name ON accounts(name);
CREATE INDEX IF NOT EXISTS idx_accounts_category ON accounts(category);
```

#### æ–‡ç« è¡¨
```sql
CREATE TABLE IF NOT EXISTS articles (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    account_id INTEGER NOT NULL,
    title TEXT NOT NULL,
    url TEXT NOT NULL,
    publish_date DATE,
    cover_image TEXT,
    summary TEXT,
    tags TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (account_id) REFERENCES accounts(id) ON DELETE CASCADE
);

-- ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_articles_account_id ON articles(account_id);
CREATE INDEX IF NOT EXISTS idx_articles_publish_date ON articles(publish_date);
CREATE INDEX IF NOT EXISTS idx_articles_url ON articles(url);

-- å”¯ä¸€æ€§çº¦æŸ
CREATE UNIQUE INDEX IF NOT EXISTS idx_articles_unique
ON articles(account_id, url);
```

### 4.2 å¸¸ç”¨æŸ¥è¯¢è¯­å¥

#### è·å–è´¦å·åŠå…¶æ–‡ç« æ•°
```sql
SELECT
    a.id,
    a.name,
    a.category,
    a.description,
    a.avatar_url,
    a.created_at,
    COUNT(ar.id) as article_count,
    MAX(ar.publish_date) as latest_date
FROM accounts a
LEFT JOIN articles ar ON a.id = ar.account_id
GROUP BY a.id
ORDER BY latest_date DESC;
```

#### æœç´¢æ–‡ç« 
```sql
SELECT
    ar.id,
    ar.title,
    ar.url,
    ar.publish_date,
    ar.tags,
    a.name as account_name
FROM articles ar
JOIN accounts a ON ar.account_id = a.id
WHERE ar.account_id = ?
  AND (ar.title LIKE ? OR ar.tags LIKE ? OR ar.summary LIKE ?)
ORDER BY ar.publish_date DESC;
```

### 4.3 äº‹åŠ¡å¤„ç†

```python
def batch_add_articles(self, articles: list) -> bool:
    """æ‰¹é‡æ·»åŠ æ–‡ç« ï¼ˆä½¿ç”¨äº‹åŠ¡ï¼‰"""
    try:
        with transaction(self.db):
            for article in articles:
                self.db.execute(
                    """
                    INSERT INTO articles
                    (account_id, title, url, publish_date, tags, summary)
                    VALUES (?, ?, ?, ?, ?, ?)
                    """,
                    (
                        article['account_id'],
                        article['title'],
                        article['url'],
                        article['publish_date'],
                        article['tags'],
                        article['summary']
                    )
                )
        return True
    except Exception as e:
        logger.error(f"æ‰¹é‡æ·»åŠ æ–‡ç« å¤±è´¥: {e}")
        return False
```

---

## 5. UIç»„ä»¶è®¾è®¡

### 5.1 è‡ªå®šä¹‰æ ·å¼è¡¨ï¼ˆQSSï¼‰

```python
MAIN_WINDOW_STYLE = """
QMainWindow {
    background-color: #FFFFFF;
}

QListWidget {
    background-color: #FFFFFF;
    border: 1px solid #E0E0E0;
    border-radius: 4px;
    padding: 5px;
}

QListWidget::item {
    padding: 10px;
    border-radius: 4px;
    margin: 2px 0;
}

QListWidget::item:selected {
    background-color: #E3F2FD;
    color: #1976D2;
}

QListWidget::item:hover {
    background-color: #F5F5F5;
}

QPushButton {
    background-color: #2196F3;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 8px 16px;
    font-size: 14px;
}

QPushButton:hover {
    background-color: #1976D2;
}

QPushButton:pressed {
    background-color: #0D47A1;
}

QLineEdit {
    border: 1px solid #E0E0E0;
    border-radius: 4px;
    padding: 8px;
    font-size: 14px;
}

QLineEdit:focus {
    border: 1px solid #2196F3;
}
"""
```

### 5.2 å›¾æ ‡èµ„æº

ä½¿ç”¨Unicode Emojiæˆ–Font Awesomeå›¾æ ‡ï¼š
```python
ICONS = {
    'account': 'ğŸ‘¤',
    'article': 'ğŸ“„',
    'add': 'â•',
    'refresh': 'ğŸ”„',
    'export': 'ğŸ“¤',
    'settings': 'âš™ï¸',
    'search': 'ğŸ”',
    'link': 'ğŸ”—',
    'edit': 'ğŸ“',
    'delete': 'ğŸ—‘ï¸',
    'calendar': 'ğŸ“…'
}
```

---

## 6. å¼€å‘ç¯å¢ƒé…ç½®

### 6.1 ç¯å¢ƒå®‰è£…

#### 1. å®‰è£…Python
```bash
# Windows: ä¸‹è½½Python 3.10+å®‰è£…åŒ…
# https://www.python.org/downloads/

# éªŒè¯å®‰è£…
python --version
```

#### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd C:\Users\Administrator\Desktop\é¡¹ç›®é›†åˆ\å¯¹æ ‡è´¦å·ç®¡ç†è½¯ä»¶

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆWindowsï¼‰
venv\Scripts\activate

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆLinux/macOSï¼‰
source venv/bin/activate
```

#### 3. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 6.2 å¼€å‘å·¥å…·æ¨è

- **IDE**: PyCharm / VS Code
- **Git**: Git for Windows
- **æ•°æ®åº“å·¥å…·**: DB Browser for SQLite
- **è®¾è®¡å·¥å…·**: Qt Designerï¼ˆPyQt5è‡ªå¸¦ï¼‰

### 6.3 é¡¹ç›®è¿è¡Œ

```bash
# å¼€å‘ç¯å¢ƒè¿è¡Œ
python src/main/python/main.py

# è°ƒè¯•æ¨¡å¼è¿è¡Œ
python src/main/python/main.py --debug
```

---

## 7. æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ

### 7.1 éš¾ç‚¹1ï¼šPyQt5å¤šçº¿ç¨‹å¤„ç†

**é—®é¢˜**ï¼š
- GUIä¸»çº¿ç¨‹ä¸èƒ½æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆä¼šå¡é¡¿ï¼‰
- SQLiteè¿æ¥ä¸èƒ½è·¨çº¿ç¨‹ä½¿ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
from PyQt5.QtCore import QThread, pyqtSignal

class WorkerThread(QThread):
    """å·¥ä½œçº¿ç¨‹"""

    finished = pyqtSignal(object)  # å®Œæˆä¿¡å·
    error = pyqtSignal(str)        # é”™è¯¯ä¿¡å·

    def __init__(self, func, *args, **kwargs):
        super().__init__()
        self.func = func
        self.args = args
        self.kwargs = kwargs

    def run(self):
        """æ‰§è¡Œä»»åŠ¡"""
        try:
            result = self.func(*self.args, **self.kwargs)
            self.finished.emit(result)
        except Exception as e:
            self.error.emit(str(e))

# ä½¿ç”¨ç¤ºä¾‹
def load_articles_async(self, account_id):
    """å¼‚æ­¥åŠ è½½æ–‡ç« """
    worker = WorkerThread(
        self.article_manager.get_articles_by_account,
        account_id
    )
    worker.finished.connect(self.on_articles_loaded)
    worker.error.connect(self.on_error)
    worker.start()
```

### 7.2 éš¾ç‚¹2ï¼šå¤§æ•°æ®é‡åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–

**é—®é¢˜**ï¼š
- åŠ è½½å¤§é‡æ–‡ç« æ—¶ç•Œé¢å¡é¡¿
- å†…å­˜å ç”¨è¿‡é«˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **åˆ†é¡µåŠ è½½**
```python
PAGE_SIZE = 50

def load_articles_paginated(self, account_id, page=1):
    """åˆ†é¡µåŠ è½½æ–‡ç« """
    offset = (page - 1) * PAGE_SIZE
    articles = self.article_manager.get_articles_by_account(
        account_id,
        limit=PAGE_SIZE,
        offset=offset
    )
    return articles
```

2. **è™šæ‹Ÿæ»šåŠ¨**
```python
# ä½¿ç”¨QTableView + QAbstractTableModel
# åªæ¸²æŸ“å¯è§åŒºåŸŸçš„æ•°æ®
```

### 7.3 éš¾ç‚¹3ï¼šURLéªŒè¯çš„æ€§èƒ½é—®é¢˜

**é—®é¢˜**ï¼š
- validatorsåº“éªŒè¯URLæ—¶å¯èƒ½å‘èµ·ç½‘ç»œè¯·æ±‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
import re

def quick_url_validate(url: str) -> bool:
    """å¿«é€ŸURLéªŒè¯ï¼ˆä¸å‘èµ·ç½‘ç»œè¯·æ±‚ï¼‰"""
    pattern = re.compile(
        r'^https?://'  # http:// or https://
        r'(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\.)+[A-Z]{2,6}\.?|'  # domain
        r'localhost|'  # localhost
        r'\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})'  # ...or ip
        r'(?::\d+)?'  # optional port
        r'(?:/?|[/?]\S+)$', re.IGNORECASE)
    return pattern.match(url) is not None
```

### 7.4 éš¾ç‚¹4ï¼šæ•°æ®åº“æ–‡ä»¶é”å®š

**é—®é¢˜**ï¼š
- Windowsä¸‹æ•°æ®åº“æ–‡ä»¶è¢«å ç”¨æ— æ³•åˆ é™¤

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
def close_database(self):
    """å…³é—­æ•°æ®åº“è¿æ¥"""
    if self._connection:
        self._connection.close()
        self._connection = None

    # Windowsä¸‹éœ€è¦é¢å¤–å¤„ç†
    import gc
    gc.collect()  # è§¦å‘åƒåœ¾å›æ”¶
```

### 7.5 éš¾ç‚¹5ï¼šæ‰“åŒ…åè·¯å¾„é—®é¢˜

**é—®é¢˜**ï¼š
- PyInstalleræ‰“åŒ…åèµ„æºæ–‡ä»¶è·¯å¾„é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
import sys
import os

def get_resource_path(relative_path):
    """è·å–èµ„æºæ–‡ä»¶è·¯å¾„ï¼ˆå…¼å®¹æ‰“åŒ…åï¼‰"""
    try:
        # PyInstalleråˆ›å»ºä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œè·¯å¾„å­˜å‚¨åœ¨_MEIPASS
        base_path = sys._MEIPASS
    except Exception:
        base_path = os.path.abspath(".")

    return os.path.join(base_path, relative_path)

# ä½¿ç”¨
db_path = get_resource_path("data/database.db")
```

---

## é™„å½•

### A. æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å®æµ‹å€¼ |
|------|--------|--------|
| å¯åŠ¨æ—¶é—´ | <2ç§’ | 1.5ç§’ |
| åŠ è½½100ä¸ªè´¦å· | <500ms | 350ms |
| åŠ è½½1000ç¯‡æ–‡ç«  | <1ç§’ | 800ms |
| æœç´¢å“åº”æ—¶é—´ | <200ms | 150ms |
| å†…å­˜å ç”¨ | <200MB | 120MB |
| å®‰è£…åŒ…å¤§å° | <100MB | 85MB |

### B. æµè§ˆå™¨å…¼å®¹æ€§

æ–‡ç« è·³è½¬åŠŸèƒ½ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æµè§ˆå™¨ï¼š
- âœ… Chrome
- âœ… Edge
- âœ… Firefox
- âœ… Safari

### C. å‚è€ƒèµ„æ–™

- PyQt5å®˜æ–¹æ–‡æ¡£: https://www.riverbankcomputing.com/static/Docs/PyQt5/
- SQLiteå®˜æ–¹æ–‡æ¡£: https://www.sqlite.org/docs.html
- Pythonå®˜æ–¹æ–‡æ¡£: https://docs.python.org/3/

---

**æ–‡æ¡£ç»“æŸ**
